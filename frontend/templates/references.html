<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Управление справочниками - ДДС</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
    <script src="/static/js/common.js" defer></script>
    <script src="/static/js/references.js" defer></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="/static/css/style.css" rel="stylesheet" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="/">Управление ДДС</a>
        <div class="navbar-nav">
          <a class="nav-link" href="/">Записи ДДС</a>
          <a class="nav-link active" href="/references/">Справочники</a>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <div class="row">
        <div class="col-12">
          <h2>Управление справочниками</h2>
        </div>
      </div>

      <!-- Status Management -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h5>Статусы</h5>
              <button
                class="btn btn-sm btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#statusModal"
              >
                Добавить
              </button>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr>
                      <th>Название</th>
                      <th>Статус</th>
                      <th>Действия</th>
                    </tr>
                  </thead>
                  <tbody id="statusTableBody">
                    <!-- Statuses will be loaded here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Transaction Types Management -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h5>Типы операций</h5>
              <button
                class="btn btn-sm btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#transactionTypeModal"
              >
                Добавить
              </button>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr>
                      <th>Название</th>
                      <th>Статус</th>
                      <th>Действия</th>
                    </tr>
                  </thead>
                  <tbody id="transactionTypeTableBody">
                    <!-- Transaction types will be loaded here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Categories Management -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h5>Категории</h5>
              <button
                class="btn btn-sm btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#categoryModal"
              >
                Добавить
              </button>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr>
                      <th>Название</th>
                      <th>Статус</th>
                      <th>Действия</th>
                    </tr>
                  </thead>
                  <tbody id="categoryTableBody">
                    <!-- Categories will be loaded here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Subcategories Management -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h5>Подкатегории</h5>
              <button
                class="btn btn-sm btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#subcategoryModal"
              >
                Добавить
              </button>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr>
                      <th>Категория</th>
                      <th>Название</th>
                      <th>Статус</th>
                      <th>Действия</th>
                    </tr>
                  </thead>
                  <tbody id="subcategoryTableBody">
                    <!-- Subcategories will be loaded here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modals -->
    <div id="modalContainer">
      <!-- Status Modal -->
      <div class="modal fade" id="statusModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="statusModalTitle">
                Создание статуса
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form id="statusForm">
                <div class="mb-3">
                  <label for="statusName" class="form-label"
                    >Название <span class="required">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="statusName"
                    required
                  />
                  <div class="error-message" id="statusNameError"></div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Отмена
              </button>
              <button type="button" class="btn btn-primary" id="saveStatus">
                Сохранить
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Transaction Type Modal -->
      <div
        class="modal fade"
        id="transactionTypeModal"
        tabindex="-1"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="transactionTypeModalTitle">
                Создание типа операции
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form id="transactionTypeForm">
                <div class="mb-3">
                  <label for="transactionTypeName" class="form-label"
                    >Название <span class="required">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="transactionTypeName"
                    required
                  />
                  <div
                    class="error-message"
                    id="transactionTypeNameError"
                  ></div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Отмена
              </button>
              <button
                type="button"
                class="btn btn-primary"
                id="saveTransactionType"
              >
                Сохранить
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Category Modal -->
      <div
        class="modal fade"
        id="categoryModal"
        tabindex="-1"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="categoryModalTitle">
                Создание категории
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form id="categoryForm">
                <div class="mb-3">
                  <label for="categoryName" class="form-label"
                    >Название <span class="required">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="categoryName"
                    required
                  />
                  <div class="error-message" id="categoryNameError"></div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Отмена
              </button>
              <button type="button" class="btn btn-primary" id="saveCategory">
                Сохранить
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Subcategory Modal -->
      <div
        class="modal fade"
        id="subcategoryModal"
        tabindex="-1"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="subcategoryModalTitle">
                Создание подкатегории
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form id="subcategoryForm">
                <div class="mb-3">
                  <label for="subcategoryCategory" class="form-label"
                    >Категория <span class="required">*</span></label
                  >
                  <select class="form-select" id="subcategoryCategory" required>
                    <option value="">Выберите категорию</option>
                  </select>
                  <div
                    class="error-message"
                    id="subcategoryCategoryError"
                  ></div>
                </div>
                <div class="mb-3">
                  <label for="subcategoryName" class="form-label"
                    >Название <span class="required">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="subcategoryName"
                    required
                  />
                  <div class="error-message" id="subcategoryNameError"></div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Отмена
              </button>
              <button
                type="button"
                class="btn btn-primary"
                id="saveSubcategory"
              >
                Сохранить
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast notifications -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div
        id="toast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <strong class="me-auto">Уведомление</strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body" id="toastBody">
          <!-- Toast message will be shown here -->
        </div>
      </div>
    </div>
  </body>
</html>
